<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Signup Form</title>
    <style>
      * {
        box-sizing: border-box;
        font-family: "Poppins", sans-serif;
      }

      body {
        margin: 0;
        padding: 0;
        background: linear-gradient(135deg, #4facfe, #00f2fe);
        height: 100vh;
        display: flex;
        justify-content: center;
        align-items: center;
      }

      main {
        background-color: #fff;
        border-radius: 12px;
        padding: 40px;
        width: 100%;
        max-width: 400px;
        box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
        animation: fadeIn 0.8s ease;
      }

      h1 {
        text-align: center;
        color: #333;
        margin-bottom: 25px;
      }

      form {
        display: flex;
        flex-direction: column;
        gap: 15px;
      }

      label {
        font-weight: 600;
        color: #444;
      }

      input {
        width: 100%;
        padding: 10px 12px;
        border: 1px solid #ccc;
        border-radius: 8px;
        outline: none;
        transition: border-color 0.3s;
      }

      input:focus {
        border-color: #4facfe;
      }

      small {
        color: red;
        font-size: 12px;
        height: 12px;
      }

      button {
        width: 100%;
        height: 40px;
        background: linear-gradient(90deg, #4facfe, #00f2fe);
        color: white;
        font-weight: bold;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        margin-top: 10px;
        transition: transform 0.2s ease, background 0.3s ease;
      }

      button:hover:enabled {
        transform: translateY(-2px);
        background: linear-gradient(90deg, #00f2fe, #4facfe);
      }

      button:disabled {
        background: #ccc;
        cursor: not-allowed;
      }

      .show-pass {
        display: flex;
        align-items: center;
        gap: 5px;
        font-size: 14px;
        color: #555;
      }

      p {
        text-align: center;
        font-size: 14px;
        color: #666;
        margin-top: 15px;
      }

      p a {
        color: #4facfe;
        text-decoration: none;
        font-weight: 600;
      }

      p a:hover {
        text-decoration: underline;
      }
    </style>
  </head>
  <body>
    <main>
      <form id="signupForm">
        <h1>Sign Up</h1>

        <label for="userName">Username</label>
        <input
          type="text"
          id="userName"
          placeholder="Enter username"
          oninput="validateForm()"
        />
        <small id="userError"></small>

        <label for="emailBox">Email</label>
        <input
          type="email"
          id="emailBox"
          placeholder="Enter email"
          oninput="validateForm()"
        />
        <small id="emailError"></small>

        <label for="passwordbox">Password</label>
        <input
          type="password"
          id="passwordbox"
          placeholder="Enter password"
          oninput="validateForm()"
        />
        <small id="passError"></small>

        <label for="confirmPassword">Confirm Password</label>
        <input
          type="password"
          id="confirmPassword"
          placeholder="Confirm password"
          oninput="validateForm()"
        />
        <small id="confirmError"></small>

        <div class="show-pass">
          <input
            type="checkbox"
            id="showPassword"
            onclick="togglePasswords()"
          />
          <label for="showPassword">Show Password</label>
        </div>

        <button type="button" id="btn" onclick="signUp()" disabled>
          Sign Up
        </button>
        <p>Already have an account? <a href="login.html">Login here</a></p>
      </form>
    </main>

    <script>
      let users = []

      function togglePasswords() {
        const pass1 = document.getElementById("passwordbox")
        const pass2 = document.getElementById("confirmPassword")
        const checkbox = document.getElementById("showPassword")

        if (checkbox.checked) {
          pass1.type = "text"
          pass2.type = "text"
        } else {
          pass1.type = "password"
          pass2.type = "password"
        }
      }

      function validateForm() {
        const userName = document.getElementById("userName").value.trim()
        const email = document.getElementById("emailBox").value.trim()
        const password = document.getElementById("passwordbox").value.trim()
        const confirm = document.getElementById("confirmPassword").value.trim()

        let valid = true

        if (userName === "") {
          document.getElementById("userError").textContent =
            "Username is required"
          valid = false
        } else {
          document.getElementById("userError").textContent = ""
        }

        if (email === "") {
          document.getElementById("emailError").textContent =
            "Email is required"
          valid = false
        } else if (!/\S+@\S+\.\S+/.test(email)) {
          document.getElementById("emailError").textContent =
            "Enter a valid email"
          valid = false
        } else {
          document.getElementById("emailError").textContent = ""
        }

        if (password === "") {
          document.getElementById("passError").textContent =
            "Password is required"
          valid = false
        } else if (password.length < 6) {
          document.getElementById("passError").textContent =
            "At least 6 characters"
          valid = false
        } else {
          document.getElementById("passError").textContent = ""
        }

        if (confirm === "") {
          document.getElementById("confirmError").textContent =
            "Confirm your password"
          valid = false
        } else if (confirm !== password) {
          document.getElementById("confirmError").textContent =
            "Passwords do not match"
          valid = false
        } else {
          document.getElementById("confirmError").textContent = ""
        }

        document.getElementById("btn").disabled = !valid
      }

      function signUp() {
        const userName = document.getElementById("userName").value.trim()
        const email = document.getElementById("emailBox").value.trim()
        const password = document.getElementById("passwordbox").value.trim()

        let users = JSON.parse(localStorage.getItem("users")) || []
        const existingUser = users.find((user) => user.email === email)
        if (existingUser) {
          alert("User with this email already exists. Please log in instead.")
          return
        }

        const newUser = {
          username: userName,
          email: email,
          password: password,
        };
        users.push(newUser)
        localStorage.setItem("users", JSON.stringify(users))

        alert(`Signup successful! Welcome, ${userName}.`)
        window.location.href = "login.html"
      }
    </script>
  </body>
</html>
